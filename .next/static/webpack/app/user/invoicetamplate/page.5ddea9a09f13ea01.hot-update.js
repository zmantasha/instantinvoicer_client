"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/user/invoicetamplate/page",{

/***/ "(app-pages-browser)/./hooks/use-invoice.ts":
/*!******************************!*\
  !*** ./hooks/use-invoice.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useInvoice: function() { return /* binding */ useInvoice; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_utils_pdf_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/utils/pdf-generator */ \"(app-pages-browser)/./lib/utils/pdf-generator.ts\");\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-toastify */ \"(app-pages-browser)/./node_modules/react-toastify/dist/index.mjs\");\n/* harmony import */ var _lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/utils/invoice-calculations */ \"(app-pages-browser)/./lib/utils/invoice-calculations.ts\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! axios */ \"(app-pages-browser)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _UserContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./UserContext */ \"(app-pages-browser)/./hooks/UserContext.tsx\");\n/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! formik */ \"(app-pages-browser)/./node_modules/formik/dist/formik.esm.js\");\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! yup */ \"(app-pages-browser)/./node_modules/yup/index.esm.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/navigation.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_navigation__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n\n\nconst initialInvoiceData = {\n    userId: \"\",\n    senderDetails: {\n        logo: \"\",\n        name: \"\",\n        address: \"\"\n    },\n    recipientDetails: {\n        billTo: {\n            name: \"\",\n            address: \"\"\n        },\n        shipTo: {\n            name: \"\",\n            address: \"\"\n        }\n    },\n    invoiceDetails: {\n        number: \"\",\n        date: new Date().toISOString().split(\"T\")[0],\n        dueDate: \"\",\n        paymentTerms: \"\",\n        poNumber: \"\",\n        currency: \"USD\"\n    },\n    items: [],\n    totals: {\n        subtotal: 0,\n        tax: 0,\n        taxRate: 0,\n        shipping: 0,\n        discount: 0,\n        discountType: 0,\n        shippingType: \"percentage\",\n        total: 0,\n        amountPaid: 0,\n        balanceDue: 0\n    },\n    notes: \"\",\n    terms: \"\"\n};\nconst cleanMongoFields = (data)=>{\n    const cleaned = {\n        ...data\n    };\n    delete cleaned._id;\n    delete cleaned.__v;\n    if (Array.isArray(cleaned.items)) {\n        cleaned.items = cleaned.items.map((item)=>{\n            const cleanedItem = {\n                ...item\n            };\n            delete cleanedItem._id;\n            delete cleanedItem.__v;\n            return cleanedItem;\n        });\n    }\n    return cleaned;\n};\nconst getEmptyFields = (errors)=>{\n    var _errors_senderDetails, _errors_senderDetails1, _errors_recipientDetails_billTo, _errors_recipientDetails, _errors_recipientDetails_billTo1, _errors_recipientDetails1, _errors_invoiceDetails, _errors_invoiceDetails1, _errors_invoiceDetails2;\n    const emptyFieldMessages = [];\n    // Check sender details\n    if ((_errors_senderDetails = errors.senderDetails) === null || _errors_senderDetails === void 0 ? void 0 : _errors_senderDetails.name) emptyFieldMessages.push(\"Business Name is required\");\n    if ((_errors_senderDetails1 = errors.senderDetails) === null || _errors_senderDetails1 === void 0 ? void 0 : _errors_senderDetails1.address) emptyFieldMessages.push(\"Business Address is required\");\n    // Check recipient details\n    if ((_errors_recipientDetails = errors.recipientDetails) === null || _errors_recipientDetails === void 0 ? void 0 : (_errors_recipientDetails_billTo = _errors_recipientDetails.billTo) === null || _errors_recipientDetails_billTo === void 0 ? void 0 : _errors_recipientDetails_billTo.name) emptyFieldMessages.push(\"Bill To Name is required\");\n    if ((_errors_recipientDetails1 = errors.recipientDetails) === null || _errors_recipientDetails1 === void 0 ? void 0 : (_errors_recipientDetails_billTo1 = _errors_recipientDetails1.billTo) === null || _errors_recipientDetails_billTo1 === void 0 ? void 0 : _errors_recipientDetails_billTo1.address) emptyFieldMessages.push(\"Bill To Address is required\");\n    // Check invoice details\n    if ((_errors_invoiceDetails = errors.invoiceDetails) === null || _errors_invoiceDetails === void 0 ? void 0 : _errors_invoiceDetails.number) emptyFieldMessages.push(\"Invoice Number is required\");\n    if ((_errors_invoiceDetails1 = errors.invoiceDetails) === null || _errors_invoiceDetails1 === void 0 ? void 0 : _errors_invoiceDetails1.date) emptyFieldMessages.push(\"Invoice Date is required\");\n    if ((_errors_invoiceDetails2 = errors.invoiceDetails) === null || _errors_invoiceDetails2 === void 0 ? void 0 : _errors_invoiceDetails2.dueDate) emptyFieldMessages.push(\"Due Date is required\");\n    // Check items\n    if (errors.items && Array.isArray(errors.items)) {\n        errors.items.forEach((itemError, index)=>{\n            if (itemError === null || itemError === void 0 ? void 0 : itemError.description) emptyFieldMessages.push(\"Item \".concat(index + 1, \": Description is required\"));\n            if (itemError === null || itemError === void 0 ? void 0 : itemError.quantity) emptyFieldMessages.push(\"Item \".concat(index + 1, \": Quantity is required\"));\n            if (itemError === null || itemError === void 0 ? void 0 : itemError.rate) emptyFieldMessages.push(\"Item \".concat(index + 1, \": Rate is required\"));\n        });\n    }\n    return emptyFieldMessages;\n};\nfunction useInvoice(initialData) {\n    // const [serverErrorMessage, setServerErrorMessage] = useState('');\n    // const [serverSuccessMessage, setServerSuccessMessage] = useState('');\n    const { user } = (0,_UserContext__WEBPACK_IMPORTED_MODULE_4__.useUser)();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_6__.useRouter)();\n    // Modify initial values to use initialData if available\n    const getInitialValues = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\n        if (!initialData) return initialInvoiceData;\n        return {\n            ...initialInvoiceData,\n            ...initialData,\n            invoiceDetails: {\n                ...initialData.invoiceDetails,\n                number: initialData.invoiceDetails.number,\n                date: new Date(initialData.invoiceDetails.date).toISOString().split(\"T\")[0],\n                dueDate: new Date(initialData.invoiceDetails.dueDate).toISOString().split(\"T\")[0]\n            }\n        };\n    }, [\n        initialData\n    ]);\n    const validationSchema = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>yup__WEBPACK_IMPORTED_MODULE_5__.object({\n            senderDetails: yup__WEBPACK_IMPORTED_MODULE_5__.object({\n                name: yup__WEBPACK_IMPORTED_MODULE_5__.string().max(50, \"Sender Name must be at most 50 characters\").required(\"Business name is required\"),\n                address: yup__WEBPACK_IMPORTED_MODULE_5__.string().max(60, \"Sender Address must be at most 60 characters\").required(\"Business address is required\")\n            }),\n            recipientDetails: yup__WEBPACK_IMPORTED_MODULE_5__.object({\n                billTo: yup__WEBPACK_IMPORTED_MODULE_5__.object({\n                    name: yup__WEBPACK_IMPORTED_MODULE_5__.string().max(50, \"Billing Name must be at most 50 characters\").required(\"Recipient name is required\"),\n                    address: yup__WEBPACK_IMPORTED_MODULE_5__.string().max(60, \"Billing Address must be at most 60 characters\").required(\"Billing address is required\")\n                }),\n                shipTo: yup__WEBPACK_IMPORTED_MODULE_5__.object({\n                    name: yup__WEBPACK_IMPORTED_MODULE_5__.string().max(50, \"Shipping Name must be at most 50 characters\"),\n                    address: yup__WEBPACK_IMPORTED_MODULE_5__.string().max(60, \"Shipping Address must be at most 60 characters\")\n                })\n            }),\n            invoiceDetails: yup__WEBPACK_IMPORTED_MODULE_5__.object({\n                number: yup__WEBPACK_IMPORTED_MODULE_5__.string().required(\"Invoice number is required\"),\n                date: yup__WEBPACK_IMPORTED_MODULE_5__.date().required(\"Invoice date is required\"),\n                dueDate: yup__WEBPACK_IMPORTED_MODULE_5__.date().required(\"Due date is required\")\n            }),\n            items: yup__WEBPACK_IMPORTED_MODULE_5__.array().of(yup__WEBPACK_IMPORTED_MODULE_5__.object({\n                description: yup__WEBPACK_IMPORTED_MODULE_5__.string().required(\"Item description is required\"),\n                quantity: yup__WEBPACK_IMPORTED_MODULE_5__.number().min(1, \"Quantity must be at least 1\").required(\"Quantity is required\"),\n                rate: yup__WEBPACK_IMPORTED_MODULE_5__.number().min(0, \"Rate must be positive\").required(\"Rate is required\")\n            }))\n        }), []);\n    //  console.log(\"initial:\",initialData)\n    const formik = (0,formik__WEBPACK_IMPORTED_MODULE_7__.useFormik)({\n        initialValues: getInitialValues,\n        validationSchema,\n        enableReinitialize: true,\n        validateOnBlur: true,\n        validateOnChange: true,\n        onSubmit: async (values, param)=>{\n            let { setSubmitting, resetForm } = param;\n            try {\n                var _user_user;\n                // Check for validation errors first\n                const errors = await formik.validateForm(values);\n                const emptyFieldMessages = getEmptyFields(errors);\n                if (Object.keys(errors).length > 0) {\n                    // Set all fields as touched to show Formik errors\n                    formik.setTouched({\n                        senderDetails: {\n                            name: true,\n                            address: true\n                        },\n                        recipientDetails: {\n                            billTo: {\n                                name: true,\n                                address: true\n                            }\n                        },\n                        invoiceDetails: {\n                            number: true,\n                            date: true,\n                            dueDate: true\n                        },\n                        items: formik.values.items.map(()=>({\n                                description: true,\n                                quantity: true,\n                                rate: true\n                            }))\n                    }, true);\n                    // Show individual toast notifications for each empty field\n                    emptyFieldMessages.forEach((message)=>{\n                        react_toastify__WEBPACK_IMPORTED_MODULE_2__.toast.error(message, {\n                            position: \"bottom-right\",\n                            autoClose: 5000\n                        });\n                    });\n                    return; // Stop submission if there are validation errors\n                }\n                const isEditing = !!initialData;\n                const url = isEditing ? \"\".concat(\"http://localhost:8002\", \"/api/v1/invoice/invoices/\").concat(initialData._id) : \"\".concat(\"http://localhost:8002\", \"/api/v1/invoice/invoices\");\n                const method = isEditing ? \"put\" : \"post\";\n                // Calculate final totals\n                const calculatedTotals = {\n                    ...values.totals,\n                    subtotal: (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateSubtotal)(values.items),\n                    tax: (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateTax)((0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateSubtotal)(values.items), values.totals.taxRate),\n                    discount: (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateDiscount)((0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateSubtotal)(values.items), values.totals.discountType),\n                    shipping: (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateShipping)((0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateSubtotal)(values.items), values.totals.shipping, values.totals.shippingType)\n                };\n                calculatedTotals.total = Number((0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateTotal)(calculatedTotals.subtotal, calculatedTotals.tax, calculatedTotals.discount, calculatedTotals.shipping));\n                calculatedTotals.balanceDue = Number(calculatedTotals.total - calculatedTotals.amountPaid);\n                // Prepare the final values\n                let finalValues = {\n                    ...values,\n                    userId: user === null || user === void 0 ? void 0 : (_user_user = user.user) === null || _user_user === void 0 ? void 0 : _user_user._id,\n                    totals: calculatedTotals\n                };\n                if (isEditing) {\n                    // For updates, ensure we keep the original invoice details\n                    finalValues = {\n                        ...finalValues,\n                        invoiceDetails: {\n                            ...finalValues.invoiceDetails,\n                            number: initialData.invoiceDetails.number,\n                            date: initialData.invoiceDetails.date,\n                            dueDate: initialData.invoiceDetails.dueDate\n                        }\n                    };\n                }\n                // Clean MongoDB fields\n                finalValues = cleanMongoFields(finalValues);\n                const response = await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"][method](url, finalValues, {\n                    withCredentials: true\n                });\n                if (response.data) {\n                    react_toastify__WEBPACK_IMPORTED_MODULE_2__.toast.success(isEditing ? \"Invoice updated successfully\" : \"Invoice saved successfully\", {\n                        position: \"bottom-right\"\n                    });\n                    if (!isEditing) {\n                        resetForm();\n                        await generateInvoiceNumber();\n                        router.push(\"/user/d/\".concat(response.data.invoice._id)); // Redirect to /user/myinvoice when a new invoice is saved\n                    } else {\n                        router.push(\"/user/d/\".concat(response.data._id)); // Redirect to /user/d/[id] when an invoice is updated\n                    }\n                }\n            } catch (error) {\n                var _error_response_data, _error_response;\n                console.error(\"Operation failed:\", error);\n                react_toastify__WEBPACK_IMPORTED_MODULE_2__.toast.error(axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isAxiosError(error) ? ((_error_response = error.response) === null || _error_response === void 0 ? void 0 : (_error_response_data = _error_response.data) === null || _error_response_data === void 0 ? void 0 : _error_response_data.message) || error.message : \"Something went wrong. Please try again.\", {\n                    position: \"bottom-right\"\n                });\n            // setTimeout(() => setServerErrorMessage(''), 5000);\n            } finally{\n                setSubmitting(false);\n            }\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Only generate invoice number for new invoices\n        if ((user === null || user === void 0 ? void 0 : user.user._id) && !initialData) {\n            generateInvoiceNumber();\n        }\n    }, [\n        user,\n        initialData\n    ]);\n    const generateInvoiceNumber = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (!(user === null || user === void 0 ? void 0 : user.user._id)) return;\n        try {\n            const response = await axios__WEBPACK_IMPORTED_MODULE_8__[\"default\"].get(\"\".concat(\"http://localhost:8002\", \"/api/v1/invoice/invoices/userId/\").concat(user.user._id));\n            const invoices = response.data;\n            let newInvoiceNumber = \"INV-0001\";\n            if ((invoices === null || invoices === void 0 ? void 0 : invoices.length) > 0) {\n                var _latestInvoice_invoiceDetails;\n                const latestInvoice = invoices[invoices.length - 1];\n                if ((_latestInvoice_invoiceDetails = latestInvoice.invoiceDetails) === null || _latestInvoice_invoiceDetails === void 0 ? void 0 : _latestInvoice_invoiceDetails.number) {\n                    const lastNumber = parseInt(latestInvoice.invoiceDetails.number.replace(\"INV-\", \"\"), 10);\n                    newInvoiceNumber = \"INV-\".concat(String(lastNumber + 1).padStart(4, \"0\"));\n                }\n            }\n            formik.setFieldValue(\"invoiceDetails.number\", newInvoiceNumber);\n            formik.setFieldValue(\"senderDetails.name\", user.user.firstName || \"\");\n            formik.setFieldValue(\"senderDetails.address\", user.user.address || \"\");\n            formik.setFieldValue(\"senderDetails.logo\", user.user.logo || \"\");\n        } catch (error) {\n            console.error(\"Error fetching invoices:\", error);\n        }\n    }, [\n        user === null || user === void 0 ? void 0 : user.user._id,\n        formik.setFieldValue\n    ]);\n    const generatePDF = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        try {\n            const invoiceDataWithId = {\n                ...formik.values,\n                _id: (initialData === null || initialData === void 0 ? void 0 : initialData._id) || \"dummy-id\"\n            };\n            const pdfBlob = await (0,_lib_utils_pdf_generator__WEBPACK_IMPORTED_MODULE_1__.generateInvoicePDF)(invoiceDataWithId);\n            const url = URL.createObjectURL(pdfBlob);\n            const link = document.createElement(\"a\");\n            link.href = url;\n            link.download = \"invoice-\".concat(formik.values.invoiceDetails.number || \"draft\", \".pdf\");\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            URL.revokeObjectURL(url);\n        } catch (error) {\n            console.error(\"Error generating PDF:\", error);\n        }\n    }, [\n        formik.values,\n        initialData\n    ]);\n    // const generatePDF = useCallback(async () => {\n    //   try {\n    //     const invoiceDataWithId = {\n    //       ...formik.values,\n    //       _id: initialData?._id || 'dummy-id', // Add a dummy or real _id here\n    //     };\n    //     const pdfBlob = await generateInvoicedoc(invoiceDataWithId);\n    //     const url = URL.createObjectURL(pdfBlob);\n    //     const link = document.createElement('a');\n    //     link.href = url;\n    //     link.download = `invoice-${formik.values.invoiceDetails.number || 'draft'}.pdf`;\n    //     document.body.appendChild(link);\n    //     link.click();\n    //     document.body.removeChild(link);\n    //     URL.revokeObjectURL(url);\n    //   } catch (error) {\n    //     console.error('Error generating PDF:', error);\n    //   }\n    // }, [formik.values, initialData]);\n    // Update functions that work with formik\n    const updateSenderDetails = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((details)=>{\n        formik.setFieldValue(\"senderDetails\", details);\n    }, [\n        formik.setFieldValue\n    ]);\n    const updateRecipientDetails = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((details)=>{\n        formik.setFieldValue(\"recipientDetails\", details);\n    }, [\n        formik.setFieldValue\n    ]);\n    const updateInvoiceDetails = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((details)=>{\n        formik.setFieldValue(\"invoiceDetails\", details);\n    }, [\n        formik.setFieldValue\n    ]);\n    const updateItems = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((items)=>{\n        formik.setFieldValue(\"items\", items);\n        // Recalculate totals\n        const subtotal = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateSubtotal)(items);\n        const tax = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateTax)(subtotal, formik.values.totals.taxRate);\n        const discount = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateDiscount)(subtotal, formik.values.totals.discountType);\n        const shipping = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateShipping)(subtotal, formik.values.totals.shipping, formik.values.totals.shippingType);\n        const total = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateTotal)(subtotal, tax, discount, shipping);\n        const balanceDue = total - formik.values.totals.amountPaid;\n        // console.log(balanceDue)\n        formik.setFieldValue(\"totals\", {\n            ...formik.values.totals,\n            subtotal,\n            tax,\n            discount,\n            total,\n            balanceDue\n        });\n    }, [\n        formik.setFieldValue,\n        formik.values.totals\n    ]);\n    const updateTotals = (totals)=>{\n        // Recalculate subtotal, tax, discount, and shipping based on the items\n        const subtotal = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateSubtotal)(formik.values.items);\n        const tax = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateTax)(subtotal, totals.taxRate);\n        const discount = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateDiscount)(subtotal, totals.discountType);\n        const shipping = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateShipping)(subtotal, totals.shipping, totals.shippingType);\n        // Keep the total as the calculated value, don't modify it based on the amountPaid\n        const total = (0,_lib_utils_invoice_calculations__WEBPACK_IMPORTED_MODULE_3__.calculateTotal)(subtotal, tax, discount, shipping);\n        // Only update the balance due, subtracting the amount paid from the total\n        const balanceDue = total - totals.amountPaid;\n        // Update formik with the new totals\n        formik.setFieldValue(\"totals\", {\n            ...totals,\n            subtotal,\n            tax,\n            discount,\n            total,\n            balanceDue\n        });\n    };\n    const updateNotes = (notes)=>{\n        formik.setFieldValue(\"notes\", notes);\n    };\n    const updateTerms = (terms)=>{\n        formik.setFieldValue(\"terms\", terms);\n    };\n    const saveInvoice = async ()=>{\n        // Validate form and show both Formik errors and toast notifications\n        const errors = await formik.validateForm();\n        const emptyFieldMessages = getEmptyFields(errors);\n        // Set all fields as touched to show Formik errors\n        formik.setTouched({\n            senderDetails: {\n                name: true,\n                address: true\n            },\n            recipientDetails: {\n                billTo: {\n                    name: true,\n                    address: true\n                }\n            },\n            invoiceDetails: {\n                number: true,\n                date: true,\n                dueDate: true\n            },\n            items: formik.values.items.map(()=>({\n                    description: true,\n                    quantity: true,\n                    rate: true\n                }))\n        }, true);\n        // Show individual toast notifications for each empty field\n        emptyFieldMessages.forEach((message)=>{\n            react_toastify__WEBPACK_IMPORTED_MODULE_2__.toast.error(message, {\n                position: \"bottom-right\",\n                autoClose: 5000\n            });\n        });\n        // Continue with form submission\n        formik.handleSubmit();\n    };\n    return {\n        invoiceData: formik.values,\n        updateSenderDetails,\n        updateRecipientDetails,\n        updateInvoiceDetails,\n        updateItems,\n        updateTotals,\n        updateNotes,\n        updateTerms,\n        generatePDF,\n        saveInvoice,\n        formErrors: formik.errors,\n        formTouched: formik.touched,\n        formik\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZS1pbnZvaWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFrRTtBQUVKO0FBQ3ZCO0FBT0k7QUFDakI7QUFDYztBQUNMO0FBRVI7QUFDaUI7QUFFNUMsTUFBTWUscUJBQStDO0lBQ25EQyxRQUFRO0lBQ1JDLGVBQWU7UUFDYkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLFNBQVM7SUFDWDtJQUNBQyxrQkFBa0I7UUFDaEJDLFFBQVE7WUFDTkgsTUFBTTtZQUNOQyxTQUFTO1FBQ1g7UUFDQUcsUUFBUTtZQUNOSixNQUFNO1lBQ05DLFNBQVM7UUFDWDtJQUNGO0lBQ0FJLGdCQUFnQjtRQUNkQyxRQUFRO1FBQ1JDLE1BQU0sSUFBSUMsT0FBT0MsV0FBVyxHQUFHQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDNUNDLFNBQVM7UUFDVEMsY0FBYztRQUNkQyxVQUFVO1FBQ1ZDLFVBQVU7SUFDWjtJQUNBQyxPQUFPLEVBQUU7SUFDVEMsUUFBUTtRQUNOQyxVQUFVO1FBQ1ZDLEtBQUs7UUFDTEMsU0FBUztRQUNUQyxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsY0FBYztRQUNkQyxjQUFjO1FBQ2RDLE9BQU87UUFDUEMsWUFBWTtRQUNaQyxZQUFZO0lBQ2Q7SUFDQUMsT0FBTztJQUNQQyxPQUFPO0FBQ1Q7QUFJQSxNQUFNQyxtQkFBbUIsQ0FBQ0M7SUFDeEIsTUFBTUMsVUFBVTtRQUFFLEdBQUdELElBQUk7SUFBQztJQUMxQixPQUFPQyxRQUFRQyxHQUFHO0lBQ2xCLE9BQU9ELFFBQVFFLEdBQUc7SUFFbEIsSUFBSUMsTUFBTUMsT0FBTyxDQUFDSixRQUFRaEIsS0FBSyxHQUFHO1FBQ2hDZ0IsUUFBUWhCLEtBQUssR0FBR2dCLFFBQVFoQixLQUFLLENBQUNxQixHQUFHLENBQUMsQ0FBQ0M7WUFDakMsTUFBTUMsY0FBYztnQkFBRSxHQUFHRCxJQUFJO1lBQUM7WUFDOUIsT0FBT0MsWUFBWU4sR0FBRztZQUN0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TTlCLHFCQUFxQkYsZUFBZUM7UUFFMUMsa0RBQWtEO1FBQ2xEc0IsT0FBT2EsVUFBVSxDQUFDO1lBQ2hCN0UsZUFBZTtnQkFBRUUsTUFBTTtnQkFBTUMsU0FBUztZQUFLO1lBQzNDQyxrQkFBa0I7Z0JBQUVDLFFBQVE7b0JBQUVILE1BQU07b0JBQU1DLFNBQVM7Z0JBQUs7WUFBRTtZQUMxREksZ0JBQWdCO2dCQUFFQyxRQUFRO2dCQUFNQyxNQUFNO2dCQUFNSSxTQUFTO1lBQUs7WUFDMURJLE9BQU8rQyxPQUFPTSxNQUFNLENBQUNyRCxLQUFLLENBQUNxQixHQUFHLENBQUMsSUFBTztvQkFBRVUsYUFBYTtvQkFBTUMsVUFBVTtvQkFBTUMsTUFBTTtnQkFBSztRQUN4RixHQUFHO1FBRUgsMkRBQTJEO1FBQzNEUCxtQkFBbUJFLE9BQU8sQ0FBQ2lDLENBQUFBO1lBQ3pCM0YsaURBQUtBLENBQUM0RixLQUFLLENBQUNELFNBQVM7Z0JBQ25CRSxVQUFVO2dCQUNWQyxXQUFXO1lBQ2I7UUFDRjtRQUVBLGdDQUFnQztRQUNoQ2pCLE9BQU9xRSxZQUFZO0lBQ3JCO0lBRUEsT0FBTztRQUNMQyxhQUFhdEUsT0FBT00sTUFBTTtRQUMxQnNEO1FBQ0FFO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0F0QjtRQUNBdUI7UUFDQUcsWUFBWXZFLE9BQU90QixNQUFNO1FBQ3pCOEYsYUFBYXhFLE9BQU95RSxPQUFPO1FBQzNCekU7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2hvb2tzL3VzZS1pbnZvaWNlLnRzP2QxNWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgSW52b2ljZURhdGEgfSBmcm9tIFwiLi4vdHlwZXMvaW52b2ljZVwiO1xyXG5pbXBvcnQge2dlbmVyYXRlSW52b2ljZVBERn0gZnJvbSBcIi4uL2xpYi91dGlscy9wZGYtZ2VuZXJhdG9yXCI7XHJcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSBcInJlYWN0LXRvYXN0aWZ5XCI7XHJcbmltcG9ydCB7XHJcbiAgY2FsY3VsYXRlU3VidG90YWwsXHJcbiAgY2FsY3VsYXRlVGF4LFxyXG4gIGNhbGN1bGF0ZURpc2NvdW50LFxyXG4gIGNhbGN1bGF0ZVRvdGFsLFxyXG4gIGNhbGN1bGF0ZVNoaXBwaW5nLFxyXG59IGZyb20gXCIuLi9saWIvdXRpbHMvaW52b2ljZS1jYWxjdWxhdGlvbnNcIjtcclxuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xyXG5pbXBvcnQgeyB1c2VVc2VyIH0gZnJvbSBcIi4vVXNlckNvbnRleHRcIjtcclxuaW1wb3J0IHsgdXNlRm9ybWlrIH0gZnJvbSAnZm9ybWlrJztcclxuaW1wb3J0IHsgRm9ybWlrRXJyb3JzIH0gZnJvbSBcImZvcm1pa1wiO1xyXG5pbXBvcnQgKiBhcyBZdXAgZnJvbSBcInl1cFwiO1xyXG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9uYXZpZ2F0aW9uXCI7XHJcblxyXG5jb25zdCBpbml0aWFsSW52b2ljZURhdGE6IE9taXQ8SW52b2ljZURhdGEsICdfaWQnPiA9IHtcclxuICB1c2VySWQ6IFwiXCIsXHJcbiAgc2VuZGVyRGV0YWlsczoge1xyXG4gICAgbG9nbzogXCJcIixcclxuICAgIG5hbWU6IFwiXCIsXHJcbiAgICBhZGRyZXNzOiBcIlwiLFxyXG4gIH0sXHJcbiAgcmVjaXBpZW50RGV0YWlsczoge1xyXG4gICAgYmlsbFRvOiB7XHJcbiAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgIGFkZHJlc3M6IFwiXCIsXHJcbiAgICB9LFxyXG4gICAgc2hpcFRvOiB7XHJcbiAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgIGFkZHJlc3M6IFwiXCIsXHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgaW52b2ljZURldGFpbHM6IHtcclxuICAgIG51bWJlcjogXCJcIixcclxuICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxyXG4gICAgZHVlRGF0ZTogXCJcIixcclxuICAgIHBheW1lbnRUZXJtczogXCJcIixcclxuICAgIHBvTnVtYmVyOiBcIlwiLFxyXG4gICAgY3VycmVuY3k6IFwiVVNEXCIsXHJcbiAgfSxcclxuICBpdGVtczogW10sXHJcbiAgdG90YWxzOiB7XHJcbiAgICBzdWJ0b3RhbDogMCxcclxuICAgIHRheDogMCxcclxuICAgIHRheFJhdGU6IDAsXHJcbiAgICBzaGlwcGluZzogMCxcclxuICAgIGRpc2NvdW50OiAwLFxyXG4gICAgZGlzY291bnRUeXBlOiAwLFxyXG4gICAgc2hpcHBpbmdUeXBlOiBcInBlcmNlbnRhZ2VcIixcclxuICAgIHRvdGFsOiAwLFxyXG4gICAgYW1vdW50UGFpZDogMCxcclxuICAgIGJhbGFuY2VEdWU6IDAsXHJcbiAgfSxcclxuICBub3RlczogXCJcIixcclxuICB0ZXJtczogXCJcIixcclxufTtcclxuXHJcblxyXG5cclxuY29uc3QgY2xlYW5Nb25nb0ZpZWxkcyA9IChkYXRhOiBhbnkpOiBhbnkgPT4ge1xyXG4gIGNvbnN0IGNsZWFuZWQgPSB7IC4uLmRhdGEgfTtcclxuICBkZWxldGUgY2xlYW5lZC5faWQ7XHJcbiAgZGVsZXRlIGNsZWFuZWQuX192O1xyXG4gIFxyXG4gIGlmIChBcnJheS5pc0FycmF5KGNsZWFuZWQuaXRlbXMpKSB7XHJcbiAgICBjbGVhbmVkLml0ZW1zID0gY2xlYW5lZC5pdGVtcy5tYXAoKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICBjb25zdCBjbGVhbmVkSXRlbSA9IHsgLi4uaXRlbSB9O1xyXG4gICAgICBkZWxldGUgY2xlYW5lZEl0ZW0uX2lkO1xyXG4gICAgICBkZWxldGUgY2xlYW5lZEl0ZW0uX192O1xyXG4gICAgICByZXR1cm4gY2xlYW5lZEl0ZW07XHJcbiAgICB9KTtcclxuICB9XHJcbiAgcmV0dXJuIGNsZWFuZWQ7XHJcbn07XHJcbmNvbnN0IGdldEVtcHR5RmllbGRzID0gKGVycm9yczogRm9ybWlrRXJyb3JzPEludm9pY2VEYXRhPikgPT4ge1xyXG4gIGNvbnN0IGVtcHR5RmllbGRNZXNzYWdlcyA9IFtdO1xyXG4gIFxyXG4gIC8vIENoZWNrIHNlbmRlciBkZXRhaWxzXHJcbiAgaWYgKGVycm9ycy5zZW5kZXJEZXRhaWxzPy5uYW1lKSBlbXB0eUZpZWxkTWVzc2FnZXMucHVzaCgnQnVzaW5lc3MgTmFtZSBpcyByZXF1aXJlZCcpO1xyXG4gIGlmIChlcnJvcnMuc2VuZGVyRGV0YWlscz8uYWRkcmVzcykgZW1wdHlGaWVsZE1lc3NhZ2VzLnB1c2goJ0J1c2luZXNzIEFkZHJlc3MgaXMgcmVxdWlyZWQnKTtcclxuICBcclxuICAvLyBDaGVjayByZWNpcGllbnQgZGV0YWlsc1xyXG4gIGlmIChlcnJvcnMucmVjaXBpZW50RGV0YWlscz8uYmlsbFRvPy5uYW1lKSBlbXB0eUZpZWxkTWVzc2FnZXMucHVzaCgnQmlsbCBUbyBOYW1lIGlzIHJlcXVpcmVkJyk7XHJcbiAgaWYgKGVycm9ycy5yZWNpcGllbnREZXRhaWxzPy5iaWxsVG8/LmFkZHJlc3MpIGVtcHR5RmllbGRNZXNzYWdlcy5wdXNoKCdCaWxsIFRvIEFkZHJlc3MgaXMgcmVxdWlyZWQnKTtcclxuICBcclxuICAvLyBDaGVjayBpbnZvaWNlIGRldGFpbHNcclxuICBpZiAoZXJyb3JzLmludm9pY2VEZXRhaWxzPy5udW1iZXIpIGVtcHR5RmllbGRNZXNzYWdlcy5wdXNoKCdJbnZvaWNlIE51bWJlciBpcyByZXF1aXJlZCcpO1xyXG4gIGlmIChlcnJvcnMuaW52b2ljZURldGFpbHM/LmRhdGUpIGVtcHR5RmllbGRNZXNzYWdlcy5wdXNoKCdJbnZvaWNlIERhdGUgaXMgcmVxdWlyZWQnKTtcclxuICBpZiAoZXJyb3JzLmludm9pY2VEZXRhaWxzPy5kdWVEYXRlKSBlbXB0eUZpZWxkTWVzc2FnZXMucHVzaCgnRHVlIERhdGUgaXMgcmVxdWlyZWQnKTtcclxuICBcclxuICAvLyBDaGVjayBpdGVtc1xyXG4gIGlmIChlcnJvcnMuaXRlbXMgJiYgQXJyYXkuaXNBcnJheShlcnJvcnMuaXRlbXMpKSB7XHJcbiAgICBlcnJvcnMuaXRlbXMuZm9yRWFjaCgoaXRlbUVycm9yOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgaWYgKGl0ZW1FcnJvcj8uZGVzY3JpcHRpb24pIGVtcHR5RmllbGRNZXNzYWdlcy5wdXNoKGBJdGVtICR7aW5kZXggKyAxfTogRGVzY3JpcHRpb24gaXMgcmVxdWlyZWRgKTtcclxuICAgICAgaWYgKGl0ZW1FcnJvcj8ucXVhbnRpdHkpIGVtcHR5RmllbGRNZXNzYWdlcy5wdXNoKGBJdGVtICR7aW5kZXggKyAxfTogUXVhbnRpdHkgaXMgcmVxdWlyZWRgKTtcclxuICAgICAgaWYgKGl0ZW1FcnJvcj8ucmF0ZSkgZW1wdHlGaWVsZE1lc3NhZ2VzLnB1c2goYEl0ZW0gJHtpbmRleCArIDF9OiBSYXRlIGlzIHJlcXVpcmVkYCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGVtcHR5RmllbGRNZXNzYWdlcztcclxufTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlSW52b2ljZShpbml0aWFsRGF0YT86IEludm9pY2VEYXRhKSB7XHJcbiAgLy8gY29uc3QgW3NlcnZlckVycm9yTWVzc2FnZSwgc2V0U2VydmVyRXJyb3JNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcclxuICAvLyBjb25zdCBbc2VydmVyU3VjY2Vzc01lc3NhZ2UsIHNldFNlcnZlclN1Y2Nlc3NNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCB7IHVzZXIgfSA9IHVzZVVzZXIoKTtcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuICBcclxuXHJcbiAgLy8gTW9kaWZ5IGluaXRpYWwgdmFsdWVzIHRvIHVzZSBpbml0aWFsRGF0YSBpZiBhdmFpbGFibGVcclxuICBjb25zdCBnZXRJbml0aWFsVmFsdWVzID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBpZiAoIWluaXRpYWxEYXRhKSByZXR1cm4gaW5pdGlhbEludm9pY2VEYXRhO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5pbml0aWFsSW52b2ljZURhdGEsXHJcbiAgICAgIC4uLmluaXRpYWxEYXRhLFxyXG4gICAgICBpbnZvaWNlRGV0YWlsczoge1xyXG4gICAgICAgIC4uLmluaXRpYWxEYXRhLmludm9pY2VEZXRhaWxzLFxyXG4gICAgICAgIG51bWJlcjogaW5pdGlhbERhdGEuaW52b2ljZURldGFpbHMubnVtYmVyLFxyXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKGluaXRpYWxEYXRhLmludm9pY2VEZXRhaWxzLmRhdGUpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcclxuICAgICAgICBkdWVEYXRlOiBuZXcgRGF0ZShpbml0aWFsRGF0YS5pbnZvaWNlRGV0YWlscy5kdWVEYXRlKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbaW5pdGlhbERhdGFdKTs7XHJcblxyXG4gY29uc3QgdmFsaWRhdGlvblNjaGVtYSA9ICB1c2VNZW1vKCgpID0+WXVwLm9iamVjdCh7XHJcbiAgICBzZW5kZXJEZXRhaWxzOiBZdXAub2JqZWN0KHtcclxuICAgICAgbmFtZTogWXVwLnN0cmluZygpLm1heCg1MCxcIlNlbmRlciBOYW1lIG11c3QgYmUgYXQgbW9zdCA1MCBjaGFyYWN0ZXJzXCIpLnJlcXVpcmVkKFwiQnVzaW5lc3MgbmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICAgICAgYWRkcmVzczogWXVwLnN0cmluZygpLm1heCg2MCxcIlNlbmRlciBBZGRyZXNzIG11c3QgYmUgYXQgbW9zdCA2MCBjaGFyYWN0ZXJzXCIpLnJlcXVpcmVkKFwiQnVzaW5lc3MgYWRkcmVzcyBpcyByZXF1aXJlZFwiKSxcclxuICAgIH0pLFxyXG4gICAgcmVjaXBpZW50RGV0YWlsczogWXVwLm9iamVjdCh7XHJcbiAgICAgIGJpbGxUbzogWXVwLm9iamVjdCh7XHJcbiAgICAgICAgbmFtZTogWXVwLnN0cmluZygpLm1heCg1MCxcIkJpbGxpbmcgTmFtZSBtdXN0IGJlIGF0IG1vc3QgNTAgY2hhcmFjdGVyc1wiKS5yZXF1aXJlZChcIlJlY2lwaWVudCBuYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gICAgICAgIGFkZHJlc3M6IFl1cC5zdHJpbmcoKS5tYXgoNjAsXCJCaWxsaW5nIEFkZHJlc3MgbXVzdCBiZSBhdCBtb3N0IDYwIGNoYXJhY3RlcnNcIikucmVxdWlyZWQoXCJCaWxsaW5nIGFkZHJlc3MgaXMgcmVxdWlyZWRcIiksXHJcbiAgICAgIH0pLFxyXG4gICAgICBzaGlwVG86IFl1cC5vYmplY3Qoe1xyXG4gICAgICAgIG5hbWU6IFl1cC5zdHJpbmcoKS5tYXgoNTAsXCJTaGlwcGluZyBOYW1lIG11c3QgYmUgYXQgbW9zdCA1MCBjaGFyYWN0ZXJzXCIpLFxyXG4gICAgICAgIGFkZHJlc3M6IFl1cC5zdHJpbmcoKS5tYXgoNjAsXCJTaGlwcGluZyBBZGRyZXNzIG11c3QgYmUgYXQgbW9zdCA2MCBjaGFyYWN0ZXJzXCIpLFxyXG4gICAgICB9KSxcclxuICAgIH0pLFxyXG4gICAgaW52b2ljZURldGFpbHM6IFl1cC5vYmplY3Qoe1xyXG4gICAgICBudW1iZXI6IFl1cC5zdHJpbmcoKS5yZXF1aXJlZChcIkludm9pY2UgbnVtYmVyIGlzIHJlcXVpcmVkXCIpLFxyXG4gICAgICBkYXRlOiBZdXAuZGF0ZSgpLnJlcXVpcmVkKFwiSW52b2ljZSBkYXRlIGlzIHJlcXVpcmVkXCIpLFxyXG4gICAgICBkdWVEYXRlOiBZdXAuZGF0ZSgpLnJlcXVpcmVkKFwiRHVlIGRhdGUgaXMgcmVxdWlyZWRcIiksXHJcbiAgICB9KSxcclxuICAgIGl0ZW1zOiBZdXAuYXJyYXkoKVxyXG4gICAgICAub2YoXHJcbiAgICAgICAgWXVwLm9iamVjdCh7XHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogWXVwLnN0cmluZygpLnJlcXVpcmVkKFwiSXRlbSBkZXNjcmlwdGlvbiBpcyByZXF1aXJlZFwiKSxcclxuICAgICAgICAgIHF1YW50aXR5OiBZdXAubnVtYmVyKCkubWluKDEsIFwiUXVhbnRpdHkgbXVzdCBiZSBhdCBsZWFzdCAxXCIpLnJlcXVpcmVkKFwiUXVhbnRpdHkgaXMgcmVxdWlyZWRcIiksXHJcbiAgICAgICAgICByYXRlOiBZdXAubnVtYmVyKCkubWluKDAsIFwiUmF0ZSBtdXN0IGJlIHBvc2l0aXZlXCIpLnJlcXVpcmVkKFwiUmF0ZSBpcyByZXF1aXJlZFwiKSxcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgfSksIFtdKTtcclxuICAvLyAgY29uc29sZS5sb2coXCJpbml0aWFsOlwiLGluaXRpYWxEYXRhKVxyXG4gIGNvbnN0IGZvcm1payA9IHVzZUZvcm1payh7XHJcbiAgICBpbml0aWFsVmFsdWVzOiBnZXRJbml0aWFsVmFsdWVzLFxyXG4gICAgdmFsaWRhdGlvblNjaGVtYSxcclxuICAgIGVuYWJsZVJlaW5pdGlhbGl6ZTogdHJ1ZSxcclxuICAgIHZhbGlkYXRlT25CbHVyOiB0cnVlLFxyXG4gICAgdmFsaWRhdGVPbkNoYW5nZTogdHJ1ZSxcclxuICAgIG9uU3VibWl0OiBhc3luYyAodmFsdWVzLCB7IHNldFN1Ym1pdHRpbmcsIHJlc2V0Rm9ybSB9KSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBDaGVjayBmb3IgdmFsaWRhdGlvbiBlcnJvcnMgZmlyc3RcclxuICAgICAgICBjb25zdCBlcnJvcnMgPSBhd2FpdCBmb3JtaWsudmFsaWRhdGVGb3JtKHZhbHVlcyk7XHJcbiAgICAgICAgY29uc3QgZW1wdHlGaWVsZE1lc3NhZ2VzID0gZ2V0RW1wdHlGaWVsZHMoZXJyb3JzKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAvLyBTZXQgYWxsIGZpZWxkcyBhcyB0b3VjaGVkIHRvIHNob3cgRm9ybWlrIGVycm9yc1xyXG4gICAgICAgICAgZm9ybWlrLnNldFRvdWNoZWQoe1xyXG4gICAgICAgICAgICBzZW5kZXJEZXRhaWxzOiB7IG5hbWU6IHRydWUsIGFkZHJlc3M6IHRydWUgfSxcclxuICAgICAgICAgICAgcmVjaXBpZW50RGV0YWlsczogeyBiaWxsVG86IHsgbmFtZTogdHJ1ZSwgYWRkcmVzczogdHJ1ZSB9IH0sXHJcbiAgICAgICAgICAgIGludm9pY2VEZXRhaWxzOiB7IG51bWJlcjogdHJ1ZSwgZGF0ZTogdHJ1ZSwgZHVlRGF0ZTogdHJ1ZSB9LFxyXG4gICAgICAgICAgICBpdGVtczogZm9ybWlrLnZhbHVlcy5pdGVtcy5tYXAoKCkgPT4gKHsgZGVzY3JpcHRpb246IHRydWUsIHF1YW50aXR5OiB0cnVlLCByYXRlOiB0cnVlIH0pKVxyXG4gICAgICAgICAgfSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgLy8gU2hvdyBpbmRpdmlkdWFsIHRvYXN0IG5vdGlmaWNhdGlvbnMgZm9yIGVhY2ggZW1wdHkgZmllbGRcclxuICAgICAgICAgIGVtcHR5RmllbGRNZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4ge1xyXG4gICAgICAgICAgICB0b2FzdC5lcnJvcihtZXNzYWdlLCB7XHJcbiAgICAgICAgICAgICAgcG9zaXRpb246IFwiYm90dG9tLXJpZ2h0XCIsXHJcbiAgICAgICAgICAgICAgYXV0b0Nsb3NlOiA1MDAwLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuOyAvLyBTdG9wIHN1Ym1pc3Npb24gaWYgdGhlcmUgYXJlIHZhbGlkYXRpb24gZXJyb3JzXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpc0VkaXRpbmcgPSAhIWluaXRpYWxEYXRhO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGlzRWRpdGluZyBcclxuICAgICAgICAgID8gYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU0VSVkVSfS9hcGkvdjEvaW52b2ljZS9pbnZvaWNlcy8ke2luaXRpYWxEYXRhLl9pZH1gXHJcbiAgICAgICAgICA6IGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NFUlZFUn0vYXBpL3YxL2ludm9pY2UvaW52b2ljZXNgO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IGlzRWRpdGluZyA/ICdwdXQnIDogJ3Bvc3QnO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgZmluYWwgdG90YWxzXHJcbiAgICAgICAgY29uc3QgY2FsY3VsYXRlZFRvdGFscyA9IHtcclxuICAgICAgICAgIC4uLnZhbHVlcy50b3RhbHMsXHJcbiAgICAgICAgICBzdWJ0b3RhbDogY2FsY3VsYXRlU3VidG90YWwodmFsdWVzLml0ZW1zKSxcclxuICAgICAgICAgIHRheDogY2FsY3VsYXRlVGF4KGNhbGN1bGF0ZVN1YnRvdGFsKHZhbHVlcy5pdGVtcyksIHZhbHVlcy50b3RhbHMudGF4UmF0ZSksXHJcbiAgICAgICAgICBkaXNjb3VudDogY2FsY3VsYXRlRGlzY291bnQoXHJcbiAgICAgICAgICAgIGNhbGN1bGF0ZVN1YnRvdGFsKHZhbHVlcy5pdGVtcyksXHJcbiAgICAgICAgICAgIHZhbHVlcy50b3RhbHMuZGlzY291bnRUeXBlXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgc2hpcHBpbmc6IGNhbGN1bGF0ZVNoaXBwaW5nKFxyXG4gICAgICAgICAgICBjYWxjdWxhdGVTdWJ0b3RhbCh2YWx1ZXMuaXRlbXMpLFxyXG4gICAgICAgICAgICB2YWx1ZXMudG90YWxzLnNoaXBwaW5nLFxyXG4gICAgICAgICAgICB2YWx1ZXMudG90YWxzLnNoaXBwaW5nVHlwZVxyXG4gICAgICAgICAgKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNhbGN1bGF0ZWRUb3RhbHMudG90YWwgPSAgTnVtYmVyKGNhbGN1bGF0ZVRvdGFsKFxyXG4gICAgICAgICAgY2FsY3VsYXRlZFRvdGFscy5zdWJ0b3RhbCxcclxuICAgICAgICAgIGNhbGN1bGF0ZWRUb3RhbHMudGF4LFxyXG4gICAgICAgICAgY2FsY3VsYXRlZFRvdGFscy5kaXNjb3VudCxcclxuICAgICAgICAgIGNhbGN1bGF0ZWRUb3RhbHMuc2hpcHBpbmdcclxuICAgICAgICApKTtcclxuIFxyXG4gICAgICAgIGNhbGN1bGF0ZWRUb3RhbHMuYmFsYW5jZUR1ZSA9ICBOdW1iZXIoY2FsY3VsYXRlZFRvdGFscy50b3RhbCAtIGNhbGN1bGF0ZWRUb3RhbHMuYW1vdW50UGFpZCk7XHJcblxyXG4gICAgICAgIC8vIFByZXBhcmUgdGhlIGZpbmFsIHZhbHVlc1xyXG4gICAgICAgIGxldCBmaW5hbFZhbHVlcyA9IHtcclxuICAgICAgICAgIC4uLnZhbHVlcyxcclxuICAgICAgICAgIHVzZXJJZDogdXNlcj8udXNlcj8uX2lkLFxyXG4gICAgICAgICAgdG90YWxzOiBjYWxjdWxhdGVkVG90YWxzLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChpc0VkaXRpbmcpIHtcclxuICAgICAgICAgIC8vIEZvciB1cGRhdGVzLCBlbnN1cmUgd2Uga2VlcCB0aGUgb3JpZ2luYWwgaW52b2ljZSBkZXRhaWxzXHJcbiAgICAgICAgICBmaW5hbFZhbHVlcyA9IHtcclxuICAgICAgICAgICAgLi4uZmluYWxWYWx1ZXMsXHJcbiAgICAgICAgICAgIGludm9pY2VEZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgLi4uZmluYWxWYWx1ZXMuaW52b2ljZURldGFpbHMsXHJcbiAgICAgICAgICAgICAgbnVtYmVyOiBpbml0aWFsRGF0YS5pbnZvaWNlRGV0YWlscy5udW1iZXIsXHJcbiAgICAgICAgICAgICAgZGF0ZTogaW5pdGlhbERhdGEuaW52b2ljZURldGFpbHMuZGF0ZSxcclxuICAgICAgICAgICAgICBkdWVEYXRlOiBpbml0aWFsRGF0YS5pbnZvaWNlRGV0YWlscy5kdWVEYXRlLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xlYW4gTW9uZ29EQiBmaWVsZHNcclxuICAgICAgICBmaW5hbFZhbHVlcyA9IGNsZWFuTW9uZ29GaWVsZHMoZmluYWxWYWx1ZXMpO1xyXG5cclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zW21ldGhvZF0odXJsLCBmaW5hbFZhbHVlcywgeyB3aXRoQ3JlZGVudGlhbHM6IHRydWUgfSk7XHJcblxyXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XHJcbiAgICAgICAgICB0b2FzdC5zdWNjZXNzKGlzRWRpdGluZyA/ICdJbnZvaWNlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyA6ICdJbnZvaWNlIHNhdmVkIHN1Y2Nlc3NmdWxseScse1xyXG4gICAgICAgICAgICBwb3NpdGlvbjpcImJvdHRvbS1yaWdodFwiXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKCFpc0VkaXRpbmcpIHtcclxuICAgICAgICAgICAgcmVzZXRGb3JtKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRlSW52b2ljZU51bWJlcigpO1xyXG4gICAgICAgICAgIHJvdXRlci5wdXNoKGAvdXNlci9kLyR7cmVzcG9uc2UuZGF0YS5pbnZvaWNlLl9pZH1gKTsgLy8gUmVkaXJlY3QgdG8gL3VzZXIvbXlpbnZvaWNlIHdoZW4gYSBuZXcgaW52b2ljZSBpcyBzYXZlZFxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcm91dGVyLnB1c2goYC91c2VyL2QvJHtyZXNwb25zZS5kYXRhLl9pZH1gKTsgLy8gUmVkaXJlY3QgdG8gL3VzZXIvZC9baWRdIHdoZW4gYW4gaW52b2ljZSBpcyB1cGRhdGVkXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJPcGVyYXRpb24gZmFpbGVkOlwiLCBlcnJvcik7XHJcbiAgICAgICB0b2FzdC5lcnJvcihcclxuICAgICAgICAgIGF4aW9zLmlzQXhpb3NFcnJvcihlcnJvcilcclxuICAgICAgICAgICAgPyBlcnJvci5yZXNwb25zZT8uZGF0YT8ubWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlXHJcbiAgICAgICAgICAgIDogJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLicse1xyXG4gICAgICAgICAgICAgIHBvc2l0aW9uOlwiYm90dG9tLXJpZ2h0XCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiBzZXRTZXJ2ZXJFcnJvck1lc3NhZ2UoJycpLCA1MDAwKTtcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIE9ubHkgZ2VuZXJhdGUgaW52b2ljZSBudW1iZXIgZm9yIG5ldyBpbnZvaWNlc1xyXG4gICAgaWYgKHVzZXI/LnVzZXIuX2lkICYmICFpbml0aWFsRGF0YSkge1xyXG4gICAgICBnZW5lcmF0ZUludm9pY2VOdW1iZXIoKTtcclxuICAgIH1cclxuICB9LCBbdXNlciwgaW5pdGlhbERhdGFdKTtcclxuXHJcbiAgY29uc3QgZ2VuZXJhdGVJbnZvaWNlTnVtYmVyID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF1c2VyPy51c2VyLl9pZCkgcmV0dXJuO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxyXG4gICAgICAgIGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NFUlZFUn0vYXBpL3YxL2ludm9pY2UvaW52b2ljZXMvdXNlcklkLyR7dXNlci51c2VyLl9pZH1gXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGludm9pY2VzID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgbGV0IG5ld0ludm9pY2VOdW1iZXIgPSBcIklOVi0wMDAxXCI7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoaW52b2ljZXM/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBsYXRlc3RJbnZvaWNlID0gaW52b2ljZXNbaW52b2ljZXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgaWYgKGxhdGVzdEludm9pY2UuaW52b2ljZURldGFpbHM/Lm51bWJlcikge1xyXG4gICAgICAgICAgY29uc3QgbGFzdE51bWJlciA9IHBhcnNlSW50KFxyXG4gICAgICAgICAgICBsYXRlc3RJbnZvaWNlLmludm9pY2VEZXRhaWxzLm51bWJlci5yZXBsYWNlKFwiSU5WLVwiLCBcIlwiKSxcclxuICAgICAgICAgICAgMTBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBuZXdJbnZvaWNlTnVtYmVyID0gYElOVi0ke1N0cmluZyhsYXN0TnVtYmVyICsgMSkucGFkU3RhcnQoNCwgXCIwXCIpfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3JtaWsuc2V0RmllbGRWYWx1ZShcImludm9pY2VEZXRhaWxzLm51bWJlclwiLCBuZXdJbnZvaWNlTnVtYmVyKTtcclxuICAgICAgZm9ybWlrLnNldEZpZWxkVmFsdWUoXCJzZW5kZXJEZXRhaWxzLm5hbWVcIiwgdXNlci51c2VyLmZpcnN0TmFtZSB8fCBcIlwiKTtcclxuICAgICAgZm9ybWlrLnNldEZpZWxkVmFsdWUoXCJzZW5kZXJEZXRhaWxzLmFkZHJlc3NcIiwgdXNlci51c2VyLmFkZHJlc3MgfHwgXCJcIik7XHJcbiAgICAgIGZvcm1pay5zZXRGaWVsZFZhbHVlKFwic2VuZGVyRGV0YWlscy5sb2dvXCIsIHVzZXIudXNlci5sb2dvIHx8IFwiXCIpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGludm9pY2VzOlwiLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfSwgW3VzZXI/LnVzZXIuX2lkLCBmb3JtaWsuc2V0RmllbGRWYWx1ZV0pO1xyXG5cclxuICAgY29uc3QgZ2VuZXJhdGVQREYgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBpbnZvaWNlRGF0YVdpdGhJZCA9IHtcclxuICAgICAgICAuLi5mb3JtaWsudmFsdWVzLFxyXG4gICAgICAgIF9pZDogaW5pdGlhbERhdGE/Ll9pZCB8fCAnZHVtbXktaWQnLCAvLyBBZGQgYSBkdW1teSBvciByZWFsIF9pZCBoZXJlXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHBkZkJsb2IgPSBhd2FpdCBnZW5lcmF0ZUludm9pY2VQREYoaW52b2ljZURhdGFXaXRoSWQpO1xyXG4gICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHBkZkJsb2IpO1xyXG4gICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICBsaW5rLmhyZWYgPSB1cmw7XHJcbiAgICAgIGxpbmsuZG93bmxvYWQgPSBgaW52b2ljZS0ke2Zvcm1pay52YWx1ZXMuaW52b2ljZURldGFpbHMubnVtYmVyIHx8ICdkcmFmdCd9LnBkZmA7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICAgIGxpbmsuY2xpY2soKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcclxuICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBQREY6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH0sIFtmb3JtaWsudmFsdWVzLCBpbml0aWFsRGF0YV0pO1xyXG4gIC8vIGNvbnN0IGdlbmVyYXRlUERGID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gIC8vICAgdHJ5IHtcclxuICAvLyAgICAgY29uc3QgaW52b2ljZURhdGFXaXRoSWQgPSB7XHJcbiAgLy8gICAgICAgLi4uZm9ybWlrLnZhbHVlcyxcclxuICAvLyAgICAgICBfaWQ6IGluaXRpYWxEYXRhPy5faWQgfHwgJ2R1bW15LWlkJywgLy8gQWRkIGEgZHVtbXkgb3IgcmVhbCBfaWQgaGVyZVxyXG4gIC8vICAgICB9O1xyXG4gIC8vICAgICBjb25zdCBwZGZCbG9iID0gYXdhaXQgZ2VuZXJhdGVJbnZvaWNlZG9jKGludm9pY2VEYXRhV2l0aElkKTtcclxuICAvLyAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChwZGZCbG9iKTtcclxuICAvLyAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAvLyAgICAgbGluay5ocmVmID0gdXJsO1xyXG4gIC8vICAgICBsaW5rLmRvd25sb2FkID0gYGludm9pY2UtJHtmb3JtaWsudmFsdWVzLmludm9pY2VEZXRhaWxzLm51bWJlciB8fCAnZHJhZnQnfS5wZGZgO1xyXG4gIC8vICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xyXG4gIC8vICAgICBsaW5rLmNsaWNrKCk7XHJcbiAgLy8gICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XHJcbiAgLy8gICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgLy8gICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgUERGOicsIGVycm9yKTtcclxuICAvLyAgIH1cclxuICAvLyB9LCBbZm9ybWlrLnZhbHVlcywgaW5pdGlhbERhdGFdKTtcclxuICBcclxuXHJcbiAgLy8gVXBkYXRlIGZ1bmN0aW9ucyB0aGF0IHdvcmsgd2l0aCBmb3JtaWtcclxuICBjb25zdCB1cGRhdGVTZW5kZXJEZXRhaWxzID0gdXNlQ2FsbGJhY2soKGRldGFpbHM6IHR5cGVvZiBpbml0aWFsSW52b2ljZURhdGEuc2VuZGVyRGV0YWlscykgPT4ge1xyXG4gICAgZm9ybWlrLnNldEZpZWxkVmFsdWUoXCJzZW5kZXJEZXRhaWxzXCIsIGRldGFpbHMpO1xyXG4gIH0sIFtmb3JtaWsuc2V0RmllbGRWYWx1ZV0pO1xyXG5cclxuICBjb25zdCB1cGRhdGVSZWNpcGllbnREZXRhaWxzID0gdXNlQ2FsbGJhY2soKGRldGFpbHM6IHR5cGVvZiBpbml0aWFsSW52b2ljZURhdGEucmVjaXBpZW50RGV0YWlscykgPT4ge1xyXG4gICAgZm9ybWlrLnNldEZpZWxkVmFsdWUoXCJyZWNpcGllbnREZXRhaWxzXCIsIGRldGFpbHMpO1xyXG4gIH0sIFtmb3JtaWsuc2V0RmllbGRWYWx1ZV0pO1xyXG5cclxuICBjb25zdCB1cGRhdGVJbnZvaWNlRGV0YWlscyA9IHVzZUNhbGxiYWNrKChkZXRhaWxzOiB0eXBlb2YgaW5pdGlhbEludm9pY2VEYXRhLmludm9pY2VEZXRhaWxzKSA9PiB7XHJcbiAgICBmb3JtaWsuc2V0RmllbGRWYWx1ZShcImludm9pY2VEZXRhaWxzXCIsIGRldGFpbHMpO1xyXG4gIH0sIFtmb3JtaWsuc2V0RmllbGRWYWx1ZV0pO1xyXG5cclxuICBjb25zdCB1cGRhdGVJdGVtcyA9IHVzZUNhbGxiYWNrKChpdGVtczogdHlwZW9mIGluaXRpYWxJbnZvaWNlRGF0YS5pdGVtcykgPT4ge1xyXG4gICAgZm9ybWlrLnNldEZpZWxkVmFsdWUoXCJpdGVtc1wiLCBpdGVtcyk7XHJcbiAgICBcclxuICAgIC8vIFJlY2FsY3VsYXRlIHRvdGFsc1xyXG4gICAgY29uc3Qgc3VidG90YWwgPSBjYWxjdWxhdGVTdWJ0b3RhbChpdGVtcyk7XHJcbiAgICBjb25zdCB0YXggPSBjYWxjdWxhdGVUYXgoc3VidG90YWwsIGZvcm1pay52YWx1ZXMudG90YWxzLnRheFJhdGUpO1xyXG4gICAgY29uc3QgZGlzY291bnQgPSBjYWxjdWxhdGVEaXNjb3VudChcclxuICAgICAgc3VidG90YWwsXHJcbiAgICAgIGZvcm1pay52YWx1ZXMudG90YWxzLmRpc2NvdW50VHlwZVxyXG4gICAgKTtcclxuICAgIGNvbnN0IHNoaXBwaW5nID0gY2FsY3VsYXRlU2hpcHBpbmcoXHJcbiAgICAgIHN1YnRvdGFsLFxyXG4gICAgICBmb3JtaWsudmFsdWVzLnRvdGFscy5zaGlwcGluZyxcclxuICAgICAgZm9ybWlrLnZhbHVlcy50b3RhbHMuc2hpcHBpbmdUeXBlXHJcbiAgICApO1xyXG4gICAgY29uc3QgdG90YWwgPSBjYWxjdWxhdGVUb3RhbChzdWJ0b3RhbCwgdGF4LCBkaXNjb3VudCwgc2hpcHBpbmcpO1xyXG4gICAgY29uc3QgYmFsYW5jZUR1ZSA9IHRvdGFsIC0gZm9ybWlrLnZhbHVlcy50b3RhbHMuYW1vdW50UGFpZDtcclxuLy8gY29uc29sZS5sb2coYmFsYW5jZUR1ZSlcclxuICAgIGZvcm1pay5zZXRGaWVsZFZhbHVlKFwidG90YWxzXCIsIHtcclxuICAgICAgLi4uZm9ybWlrLnZhbHVlcy50b3RhbHMsXHJcbiAgICAgIHN1YnRvdGFsLFxyXG4gICAgICB0YXgsXHJcbiAgICAgIGRpc2NvdW50LFxyXG4gICAgICB0b3RhbCxcclxuICAgICAgYmFsYW5jZUR1ZSxcclxuICAgIH0pO1xyXG4gIH0sIFtmb3JtaWsuc2V0RmllbGRWYWx1ZSwgZm9ybWlrLnZhbHVlcy50b3RhbHNdKTtcclxuXHJcbiAgY29uc3QgdXBkYXRlVG90YWxzID0gKHRvdGFsczogdHlwZW9mIGluaXRpYWxJbnZvaWNlRGF0YS50b3RhbHMpID0+IHtcclxuICAgIC8vIFJlY2FsY3VsYXRlIHN1YnRvdGFsLCB0YXgsIGRpc2NvdW50LCBhbmQgc2hpcHBpbmcgYmFzZWQgb24gdGhlIGl0ZW1zXHJcbiAgICBjb25zdCBzdWJ0b3RhbCA9IGNhbGN1bGF0ZVN1YnRvdGFsKGZvcm1pay52YWx1ZXMuaXRlbXMpO1xyXG4gICAgY29uc3QgdGF4ID0gY2FsY3VsYXRlVGF4KHN1YnRvdGFsLCB0b3RhbHMudGF4UmF0ZSk7XHJcbiAgICBjb25zdCBkaXNjb3VudCA9IGNhbGN1bGF0ZURpc2NvdW50KHN1YnRvdGFsLCB0b3RhbHMuZGlzY291bnRUeXBlKTtcclxuICAgIGNvbnN0IHNoaXBwaW5nID0gY2FsY3VsYXRlU2hpcHBpbmcoc3VidG90YWwsIHRvdGFscy5zaGlwcGluZywgdG90YWxzLnNoaXBwaW5nVHlwZSk7XHJcbiAgICBcclxuICAgIC8vIEtlZXAgdGhlIHRvdGFsIGFzIHRoZSBjYWxjdWxhdGVkIHZhbHVlLCBkb24ndCBtb2RpZnkgaXQgYmFzZWQgb24gdGhlIGFtb3VudFBhaWRcclxuICAgIGNvbnN0IHRvdGFsID0gY2FsY3VsYXRlVG90YWwoc3VidG90YWwsIHRheCwgZGlzY291bnQsIHNoaXBwaW5nKTtcclxuICBcclxuICAgIC8vIE9ubHkgdXBkYXRlIHRoZSBiYWxhbmNlIGR1ZSwgc3VidHJhY3RpbmcgdGhlIGFtb3VudCBwYWlkIGZyb20gdGhlIHRvdGFsXHJcbiAgICBjb25zdCBiYWxhbmNlRHVlID0gdG90YWwgLSB0b3RhbHMuYW1vdW50UGFpZDtcclxuICBcclxuICAgIC8vIFVwZGF0ZSBmb3JtaWsgd2l0aCB0aGUgbmV3IHRvdGFsc1xyXG4gICAgZm9ybWlrLnNldEZpZWxkVmFsdWUoXCJ0b3RhbHNcIiwge1xyXG4gICAgICAuLi50b3RhbHMsXHJcbiAgICAgIHN1YnRvdGFsLFxyXG4gICAgICB0YXgsXHJcbiAgICAgIGRpc2NvdW50LFxyXG4gICAgICB0b3RhbCwgIC8vIEtlZXAgdG90YWwgdW5jaGFuZ2VkXHJcbiAgICAgIGJhbGFuY2VEdWUsICAvLyBVcGRhdGUgYmFsYW5jZSBkdWVcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgXHJcblxyXG4gIGNvbnN0IHVwZGF0ZU5vdGVzID0gKG5vdGVzOiBzdHJpbmcpID0+IHtcclxuICAgIGZvcm1pay5zZXRGaWVsZFZhbHVlKFwibm90ZXNcIiwgbm90ZXMpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHVwZGF0ZVRlcm1zID0gKHRlcm1zOiBzdHJpbmcpID0+IHtcclxuICAgIGZvcm1pay5zZXRGaWVsZFZhbHVlKFwidGVybXNcIiwgdGVybXMpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNhdmVJbnZvaWNlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gVmFsaWRhdGUgZm9ybSBhbmQgc2hvdyBib3RoIEZvcm1payBlcnJvcnMgYW5kIHRvYXN0IG5vdGlmaWNhdGlvbnNcclxuICAgIGNvbnN0IGVycm9ycyA9IGF3YWl0IGZvcm1pay52YWxpZGF0ZUZvcm0oKTtcclxuICAgIGNvbnN0IGVtcHR5RmllbGRNZXNzYWdlcyA9IGdldEVtcHR5RmllbGRzKGVycm9ycyk7XHJcbiAgICBcclxuICAgIC8vIFNldCBhbGwgZmllbGRzIGFzIHRvdWNoZWQgdG8gc2hvdyBGb3JtaWsgZXJyb3JzXHJcbiAgICBmb3JtaWsuc2V0VG91Y2hlZCh7XHJcbiAgICAgIHNlbmRlckRldGFpbHM6IHsgbmFtZTogdHJ1ZSwgYWRkcmVzczogdHJ1ZSB9LFxyXG4gICAgICByZWNpcGllbnREZXRhaWxzOiB7IGJpbGxUbzogeyBuYW1lOiB0cnVlLCBhZGRyZXNzOiB0cnVlIH0gfSxcclxuICAgICAgaW52b2ljZURldGFpbHM6IHsgbnVtYmVyOiB0cnVlLCBkYXRlOiB0cnVlLCBkdWVEYXRlOiB0cnVlIH0sXHJcbiAgICAgIGl0ZW1zOiBmb3JtaWsudmFsdWVzLml0ZW1zLm1hcCgoKSA9PiAoeyBkZXNjcmlwdGlvbjogdHJ1ZSwgcXVhbnRpdHk6IHRydWUsIHJhdGU6IHRydWUgfSkpIFxyXG4gICAgfSwgdHJ1ZSk7XHJcbiAgICBcclxuICAgIC8vIFNob3cgaW5kaXZpZHVhbCB0b2FzdCBub3RpZmljYXRpb25zIGZvciBlYWNoIGVtcHR5IGZpZWxkXHJcbiAgICBlbXB0eUZpZWxkTWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHtcclxuICAgICAgdG9hc3QuZXJyb3IobWVzc2FnZSwge1xyXG4gICAgICAgIHBvc2l0aW9uOiBcImJvdHRvbS1yaWdodFwiLFxyXG4gICAgICAgIGF1dG9DbG9zZTogNTAwMCxcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQ29udGludWUgd2l0aCBmb3JtIHN1Ym1pc3Npb25cclxuICAgIGZvcm1pay5oYW5kbGVTdWJtaXQoKTtcclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaW52b2ljZURhdGE6IGZvcm1pay52YWx1ZXMsXHJcbiAgICB1cGRhdGVTZW5kZXJEZXRhaWxzLFxyXG4gICAgdXBkYXRlUmVjaXBpZW50RGV0YWlscyxcclxuICAgIHVwZGF0ZUludm9pY2VEZXRhaWxzLFxyXG4gICAgdXBkYXRlSXRlbXMsXHJcbiAgICB1cGRhdGVUb3RhbHMsXHJcbiAgICB1cGRhdGVOb3RlcyxcclxuICAgIHVwZGF0ZVRlcm1zLFxyXG4gICAgZ2VuZXJhdGVQREYsXHJcbiAgICBzYXZlSW52b2ljZSxcclxuICAgIGZvcm1FcnJvcnM6IGZvcm1pay5lcnJvcnMsXHJcbiAgICBmb3JtVG91Y2hlZDogZm9ybWlrLnRvdWNoZWQsXHJcbiAgICBmb3JtaWssXHJcbiAgfTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJnZW5lcmF0ZUludm9pY2VQREYiLCJ0b2FzdCIsImNhbGN1bGF0ZVN1YnRvdGFsIiwiY2FsY3VsYXRlVGF4IiwiY2FsY3VsYXRlRGlzY291bnQiLCJjYWxjdWxhdGVUb3RhbCIsImNhbGN1bGF0ZVNoaXBwaW5nIiwiYXhpb3MiLCJ1c2VVc2VyIiwidXNlRm9ybWlrIiwiWXVwIiwidXNlUm91dGVyIiwiaW5pdGlhbEludm9pY2VEYXRhIiwidXNlcklkIiwic2VuZGVyRGV0YWlscyIsImxvZ28iLCJuYW1lIiwiYWRkcmVzcyIsInJlY2lwaWVudERldGFpbHMiLCJiaWxsVG8iLCJzaGlwVG8iLCJpbnZvaWNlRGV0YWlscyIsIm51bWJlciIsImRhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsImR1ZURhdGUiLCJwYXltZW50VGVybXMiLCJwb051bWJlciIsImN1cnJlbmN5IiwiaXRlbXMiLCJ0b3RhbHMiLCJzdWJ0b3RhbCIsInRheCIsInRheFJhdGUiLCJzaGlwcGluZyIsImRpc2NvdW50IiwiZGlzY291bnRUeXBlIiwic2hpcHBpbmdUeXBlIiwidG90YWwiLCJhbW91bnRQYWlkIiwiYmFsYW5jZUR1ZSIsIm5vdGVzIiwidGVybXMiLCJjbGVhbk1vbmdvRmllbGRzIiwiZGF0YSIsImNsZWFuZWQiLCJfaWQiLCJfX3YiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJpdGVtIiwiY2xlYW5lZEl0ZW0iLCJnZXRFbXB0eUZpZWxkcyIsImVycm9ycyIsImVtcHR5RmllbGRNZXNzYWdlcyIsInB1c2giLCJmb3JFYWNoIiwiaXRlbUVycm9yIiwiaW5kZXgiLCJkZXNjcmlwdGlvbiIsInF1YW50aXR5IiwicmF0ZSIsInVzZUludm9pY2UiLCJpbml0aWFsRGF0YSIsInVzZXIiLCJyb3V0ZXIiLCJnZXRJbml0aWFsVmFsdWVzIiwidmFsaWRhdGlvblNjaGVtYSIsIm9iamVjdCIsInN0cmluZyIsIm1heCIsInJlcXVpcmVkIiwiYXJyYXkiLCJvZiIsIm1pbiIsImZvcm1payIsImluaXRpYWxWYWx1ZXMiLCJlbmFibGVSZWluaXRpYWxpemUiLCJ2YWxpZGF0ZU9uQmx1ciIsInZhbGlkYXRlT25DaGFuZ2UiLCJvblN1Ym1pdCIsInZhbHVlcyIsInNldFN1Ym1pdHRpbmciLCJyZXNldEZvcm0iLCJ2YWxpZGF0ZUZvcm0iLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwic2V0VG91Y2hlZCIsIm1lc3NhZ2UiLCJlcnJvciIsInBvc2l0aW9uIiwiYXV0b0Nsb3NlIiwiaXNFZGl0aW5nIiwidXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NFUlZFUiIsIm1ldGhvZCIsImNhbGN1bGF0ZWRUb3RhbHMiLCJOdW1iZXIiLCJmaW5hbFZhbHVlcyIsInJlc3BvbnNlIiwid2l0aENyZWRlbnRpYWxzIiwic3VjY2VzcyIsImdlbmVyYXRlSW52b2ljZU51bWJlciIsImludm9pY2UiLCJjb25zb2xlIiwiaXNBeGlvc0Vycm9yIiwiZ2V0IiwiaW52b2ljZXMiLCJuZXdJbnZvaWNlTnVtYmVyIiwibGF0ZXN0SW52b2ljZSIsImxhc3ROdW1iZXIiLCJwYXJzZUludCIsInJlcGxhY2UiLCJTdHJpbmciLCJwYWRTdGFydCIsInNldEZpZWxkVmFsdWUiLCJmaXJzdE5hbWUiLCJnZW5lcmF0ZVBERiIsImludm9pY2VEYXRhV2l0aElkIiwicGRmQmxvYiIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImxpbmsiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwiZG93bmxvYWQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjbGljayIsInJlbW92ZUNoaWxkIiwicmV2b2tlT2JqZWN0VVJMIiwidXBkYXRlU2VuZGVyRGV0YWlscyIsImRldGFpbHMiLCJ1cGRhdGVSZWNpcGllbnREZXRhaWxzIiwidXBkYXRlSW52b2ljZURldGFpbHMiLCJ1cGRhdGVJdGVtcyIsInVwZGF0ZVRvdGFscyIsInVwZGF0ZU5vdGVzIiwidXBkYXRlVGVybXMiLCJzYXZlSW52b2ljZSIsImhhbmRsZVN1Ym1pdCIsImludm9pY2VEYXRhIiwiZm9ybUVycm9ycyIsImZvcm1Ub3VjaGVkIiwidG91Y2hlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/use-invoice.ts\n"));

/***/ })

});